{% extends 'base.html' %}

{% block title %}{{ routine.name }} - IronRoutine{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Routine Header -->
    <div class="workout-header">
        <div class="flex justify-between items-start">
            <div>
                <h1 class="text-3xl font-bold mb-2">{{ routine.name }}</h1>
                {% if routine.description %}
                    <p class="text-lg opacity-90">{{ routine.description }}</p>
                {% endif %}
            </div>
            <div class="text-right">
                <div class="text-sm opacity-75">Created</div>
                <div>{{ routine.created_at|date:"M d, Y" }}</div>
            </div>
        </div>
    </div>
    
    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ routine_exercises.count }}</div>
            <div class="stat-label">Exercises</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ total_sets }}</div>
            <div class="stat-label">Total Sets</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ estimated_duration }}</div>
            <div class="stat-label">Est. Minutes</div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="flex gap-4 mb-6">
        <a href="{% url 'routines:routine_start' routine.id %}" 
           class="btn btn-success btn-lg flex-1">
            üèãÔ∏è Start This Workout
        </a>
        <a href="{% url 'routines:routine_edit' routine.id %}" 
           class="btn btn-secondary">
            Edit
        </a>
        <a href="{% url 'routines:routine_delete' routine.id %}" 
           class="btn btn-danger">
            Delete
        </a>
    </div>
    
    <!-- Exercise List -->
    <div class="card">
        <div class="card-header">Exercise Details</div>
        <div class="card-body">
            {% if routine_exercises %}
                {% for routine_exercise in routine_exercises %}
                    <div class="exercise-progress">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold">{{ routine_exercise.exercise.name }}</h3>
                                <p class="text-muted mb-2">{{ routine_exercise.exercise.description }}</p>
                                
                                <!-- Muscle Groups -->
                                <div class="mb-2">
                                    {% for muscle_group in routine_exercise.exercise.muscle_groups.all %}
                                        <span class="muscle-group-tag">{{ muscle_group.name }}</span>
                                    {% endfor %}
                                </div>
                                
                                <!-- Equipment -->
                                {% if routine_exercise.exercise.equipment_needed %}
                                    <div class="text-sm text-muted">
                                        <strong>Equipment:</strong> {{ routine_exercise.exercise.equipment_needed }}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="text-right">
                                <div class="text-2xl font-bold text-primary">{{ routine_exercise.sets_count }}</div>
                                <div class="text-sm text-muted">sets</div>
                                <div class="text-sm text-muted mt-1">{{ routine_exercise.rest_time_seconds }}s rest</div>
                            </div>
                        </div>
                        
                        <!-- Instructions -->
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <h4 class="font-semibold mb-2">Instructions:</h4>
                            <p class="text-sm">{{ routine_exercise.exercise.instructions }}</p>
                        </div>
                        
                        {% if routine_exercise.target_reps or routine_exercise.target_weight %}
                            <div class="mt-3 flex gap-4 text-sm">
                                {% if routine_exercise.target_reps %}
                                    <div><strong>Target Reps:</strong> {{ routine_exercise.target_reps }}</div>
                                {% endif %}
                                {% if routine_exercise.target_weight %}
                                    <div><strong>Target Weight:</strong> {{ routine_exercise.target_weight }}kg</div>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                    
                    {% if not forloop.last %}
                        <hr class="my-4">
                    {% endif %}
                {% endfor %}
            {% else %}
                <div class="text-center text-muted py-8">
                    <h3>No exercises in this routine</h3>
                    <p class="mb-4">Add some exercises to get started!</p>
                    <a href="{% url 'routines:routine_edit' routine.id %}" class="btn btn-primary">
                        Add Exercises
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Navigation -->
    <div class="mt-6 text-center">
        <a href="{% url 'routines:routine_list' %}" class="btn btn-secondary">
            ‚Üê Back to Routines
        </a>
    </div>
</div>

<style>
.bg-gray-50 {
    background-color: #f9fafb;
}

hr {
    border: none;
    border-top: 1px solid #e5e7eb;
}
</style>
{% endblock %}